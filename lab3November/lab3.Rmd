---
title: "lab3"
output: html_document
---
# Лабораторная работа 3
## Задание 1
### 1. Чтение html с помощью readLines.
```{r}
  data <- readLines("https://raw.githubusercontent.com/SergeyMirvoda/da2016/master/data/forbes.htm",warn = T)
```
#### 1. Количество строк
```{r}
  length(data)
```
#### 2. Количество символов в строках
```{r}
  sum(sapply(data,nchar))
```
### 2. Доход Билла Гейста в 2013 $72B первый в списке, Ларри Эллисона $41B третий в списке
### 3.Написание шаблона через regexp and regmathes для получения 100 доходов.
```{r}
  f <-regmatches(data,regexpr("[$](\\d{1,2}[,]?\\d?)\\s",data))
```
#### 1. Ровно 100 значений
```{r}
  length(f)
```
#### 2. Проверка что Билл Гейтс самый богатый в 2013
```{r}
    f[1]
```
#### 3.Проверка на то, что $72 B встречается один раз
```{r}
    length(f[f=="$72 "])
```
#### 4. Ларри Эллисон третий в списке с доходом в $41 B
```{r}
    f[3]
```
#### 5. проверка на возможную повторяемость значений, например $4.6 B
```{r}
    length(f[f=="$4,6 "])
```
   
   
## Задание 2   
   
### Преобразование в chr in num   
#### 1. Удаление $ и провелов
#### 2. Замена "," on "."
#### 3. Преобразование вектора в num
```{r}    
  money <- substr(f,2,nchar(f)-1)
  r <- sub("[,]",".",money)
  money.num <- as.numeric(r)
```
### 1. Умножение значения вектора на составляющую миллиарду e+09 и запись в worths.
```{r}
  worths <- money.num*10**9 
```
#### 1. Проверка на количество и тип
```{r}
    length(worths)
    typeof(worths)
```
#### 2. Проверка что все элементы вектора больше 1 миллиарда
```{r}
  min(worths)
```
#### 3. Проверка что Билл Гейтс самый богатый в 2013
```{r}
  which(worths==max(worths))
  worths[1]
```

> Проверка показала, что самый богатый это первый человек в списке с доходом 72 милларда. Используя информация о том, что Билл Гейтс первый в списке и доход 72 миллирда из пунка 1.2 и проверка на единственность из пункта 1.3, делаем вывод, что у Билла Гейтса самый большой доход в 2013

### 2 Вычисляем следующую информацию:
#### 1. Медиана доходов
```{r}
  median(worths)
```
#### 2. Средний доход
```{r}
  mean(worths)
```
#### 3. Количество людей, у которых доход больше 5; 10; 25 миллиардов
```{r}
  length(worths[worths>5e+09])
  length(worths[worths>10e+09])
  length(worths[worths>25e+09])
```
#### 4. Общий доход
```{r}
  sum(worths)
```
#### 5. Доля пяти самых богатых от общего дохода
```{r}
  sum(worths[c(1:5)])/sum(worths)
```
#### 6. Доля 20 самых богатых от общего дохода
```{r}
  sum(worths[c(1:20)])/sum(worths)
```
#### 7. Доля домохозяйств США (78 миллиардов(2013)) от общего дохода 100 богатых людей
```{r}
  Household.net.worth.Billion.2013 <- 78.909e+09
  Household.net.worth.Billion.2013/sum(worths)
```
